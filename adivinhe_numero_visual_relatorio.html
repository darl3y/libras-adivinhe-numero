<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Adivinhe o N√∫mero ‚Äì Visual + Relat√≥rio PDF</title>

<!-- Biblioteca para gerar PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
    background-color: #f4f4f4;
    text-align: center;
    padding: 20px;
    font-family: Arial, sans-serif;
}

.container {
    max-width: 900px;
    margin: auto;
}

/* Topo com tempo e tentativas */
.topo {
    display: flex;
    justify-content: space-around;
    margin-bottom: 15px;
}

.caixa-info {
    background: #eef2ff;
    padding: 10px 15px;
    border-radius: 10px;
    font-weight: bold;
    font-size: 18px;
}

/* Avatar grande */
.avatar img {
    width: 280px;
    margin-bottom: 15px;
}

/* Grid dos n√∫meros (grandes) */
.grid-numeros {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    max-width: 800px;
    margin: auto;
}

.btn-numero {
    font-size: 40px;
    padding: 18px;
    background: white;
    border: 2px solid #ccc;
    border-radius: 15px;
    cursor: pointer;
}

.btn-numero:disabled {
    background: #ddd;
}

/* Controles */
.controles {
    margin: 15px 0;
}

button {
    padding: 10px 15px;
    margin: 5px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

#play {
    background-color: #ff9800;
    color: white;
}

#reiniciar {
    background-color: #2196F3;
    color: white;
}

#pdf {
    background-color: #4CAF50;
    color: white;
}

/* Nome do aluno */
.nome-aluno {
    margin-bottom: 10px;
}

/* Ranking */
.ranking {
    margin-top: 20px;
    padding: 10px;
    background: #f0f7ff;
    border-radius: 12px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #ccc;
    padding: 6px;
}

th {
    background: #dde7ff;
}
</style>
</head>

<body>

<div class="container">

<div class="topo">
    <div class="caixa-info">‚è≥ Tempo: <span id="tempo">30</span>s</div>
    <div class="caixa-info">üéØ Tentativas: <span id="tentativas">0</span></div>
</div>

<div class="nome-aluno">
    <input type="text" id="nomeAluno" placeholder="Nome do aluno">
</div>

<div class="controles">
    <button id="play" onclick="iniciar()">‚ñ∂Ô∏è Play</button>
    <button id="reiniciar" onclick="reiniciar()" disabled>üîÑ Reiniciar</button>
    <button id="pdf" onclick="gerarPDF()" disabled>üìÑ Criar relat√≥rio</button>
</div>

<div class="avatar">
    <img id="avatar" src="" alt="Avatar em Libras">
</div>

<div class="grid-numeros">
    <button class="btn-numero" onclick="clicarNumero(1)" disabled>1Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(2)" disabled>2Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(3)" disabled>3Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(4)" disabled>4Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(5)" disabled>5Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(6)" disabled>6Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(7)" disabled>7Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(8)" disabled>8Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(9)" disabled>9Ô∏è‚É£</button>
    <button class="btn-numero" onclick="clicarNumero(10)" disabled>üîü</button>
</div>

<div class="ranking">
<h3>üèÜ Ranking por Aluno</h3>
<table>
<thead>
<tr>
<th>Aluno</th>
<th>Tentativas</th>
</tr>
</thead>
<tbody id="listaRanking"></tbody>
</table>
</div>

</div>

<script>
let numeroSecreto;
let tentativas;
let tempo;
let timer;
let ranking = [];
let acertos = 0;
let erros = 0;

function iniciar() {
    let nome = document.getElementById("nomeAluno").value.trim();
    if (nome === "") {
        alert("Digite o nome do aluno");
        return;
    }

    numeroSecreto = Math.floor(Math.random() * 10) + 1;
    tentativas = 0;
    tempo = 30;
    acertos = 0;
    erros = 0;

    document.getElementById("tentativas").innerText = tentativas;
    document.getElementById("tempo").innerText = tempo;
    document.getElementById("avatar").src = "";

    document.querySelectorAll(".btn-numero").forEach(b => b.disabled = false);
    document.getElementById("reiniciar").disabled = false;
    document.getElementById("pdf").disabled = true;

    clearInterval(timer);
    timer = setInterval(contarTempo, 1000);
}

function contarTempo() {
    tempo--;
    document.getElementById("tempo").innerText = tempo;

    if (tempo <= 0) {
        clearInterval(timer);
        fimDeJogo(false);
    }
}

function clicarNumero(palpite) {
    tentativas++;
    document.getElementById("tentativas").innerText = tentativas;

    if (palpite > numeroSecreto) {
        erros++;
        document.getElementById("avatar").src = "avatar_menor.gif";
    } 
    else if (palpite < numeroSecreto) {
        erros++;
        document.getElementById("avatar").src = "avatar_maior.gif";
    } 
    else {
        acertos++;
        fimDeJogo(true);
    }
}

function fimDeJogo(acertou) {
    clearInterval(timer);
    document.querySelectorAll(".btn-numero").forEach(b => b.disabled = true);

    let nome = document.getElementById("nomeAluno").value.trim();

    if (acertou) {
        document.getElementById("avatar").src = "avatar_acertou.gif";
        ranking.push({ nome, tentativas });
        ranking.sort((a, b) => a.tentativas - b.tentativas);
        atualizarRanking();
    } else {
        document.getElementById("avatar").src = "avatar_tempo.gif";
    }

    document.getElementById("pdf").disabled = false;
}

function atualizarRanking() {
    let lista = document.getElementById("listaRanking");
    lista.innerHTML = "";

    ranking.forEach(r => {
        lista.innerHTML += `
        <tr>
            <td>${r.nome}</td>
            <td>${r.tentativas}</td>
        </tr>`;
    });
}

function reiniciar() {
    iniciar();
}

function avaliarDesempenho() {
    let total = tentativas;
    if (total === 0) return "SEM DADOS";

    let taxaErro = (erros / total) * 100;
    let taxaAcerto = 100 - taxaErro;

    if (taxaAcerto >= 80) return "BOM ‚úÖ";
    if (taxaAcerto >= 50) return "REGULAR ‚ö†Ô∏è";
    return "RUIM ‚ùå";
}

function gerarPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let nome = document.getElementById("nomeAluno").value.trim();
    let desempenho = avaliarDesempenho();
    let data = new Date().toLocaleString("pt-BR");

    doc.setFontSize(16);
    doc.text("RELAT√ìRIO ‚Äì ATIVIDADE VISUAL EM LIBRAS", 10, 20);

    doc.setFontSize(12);
    doc.text(`Aluno: ${nome}`, 10, 35);
    doc.text(`Data/Hora: ${data}`, 10, 45);
    doc.text("Atividade: Adivinhe o N√∫mero (1‚Äì10)", 10, 55);

    doc.text(`Tempo usado: ${30 - tempo}s`, 10, 70);
    doc.text(`Tentativas: ${tentativas}`, 10, 80);
    doc.text(`Acertos: ${acertos}`, 10, 90);
    doc.text(`Erros: ${erros}`, 10, 100);

    doc.text(`Desempenho geral: ${desempenho}`, 10, 115);

    doc.text("An√°lise autom√°tica:", 10, 130);
    doc.text("- Observou o avatar e ajustou escolhas", 10, 140);
    doc.text("- Tomada de decis√£o visual adequada", 10, 150);
    doc.text("- Ritmo compat√≠vel com tempo dispon√≠vel", 10, 160);

    doc.save(`relatorio_${nome}.pdf`);
}
</script>

</body>
</html>
