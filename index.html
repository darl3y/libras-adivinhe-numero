<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Adivinhe o N√∫mero - Libras</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f4f4f4;
}

#container {
  max-width: 600px;
  margin: 30px auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,.1);
}

#jogo { display: none; }

input {
  display: block;
  width: 90%;
  margin: 10px auto;
  padding: 8px;
}

button {
  padding: 10px 15px;
  margin: 5px;
  font-size: 16px;
  cursor: pointer;
}

.numeros button {
  font-size: 22px;
  width: 50px;
  height: 50px;
  margin: 5px;
}

#avatar {
  width: 180px;
  margin: 15px 0;
}
</style>
</head>
<body>

<div id="container">

<h2>Adivinhe o N√∫mero (1‚Äì10)</h2>

<!-- FORMUL√ÅRIO INICIAL -->
<div id="formInicio">
  <p>Digite seu nome e e-mail @handtalk.me para come√ßar:</p>
  <input id="nomeAluno" placeholder="Seu nome completo">
  <input id="emailAluno" placeholder="seu@handtalk.me">
  <button onclick="iniciarJogo()">‚ñ∂Ô∏è Play</button>
</div>

<!-- TELA DO JOGO -->
<div id="jogo">

  <img id="avatar" src="avatar_maior.gif" alt="Avatar em Libras">

  <p>Tempo: <span id="tempo">30</span>s</p>
  <p>Tentativas: <span id="tentativas">0</span></p>

  <p id="feedback">Escolha um n√∫mero üëá</p>

  <div class="numeros">
    <button onclick="tentar(1)">1Ô∏è‚É£</button>
    <button onclick="tentar(2)">2Ô∏è‚É£</button>
    <button onclick="tentar(3)">3Ô∏è‚É£</button>
    <button onclick="tentar(4)">4Ô∏è‚É£</button>
    <button onclick="tentar(5)">5Ô∏è‚É£</button><br>
    <button onclick="tentar(6)">6Ô∏è‚É£</button>
    <button onclick="tentar(7)">7Ô∏è‚É£</button>
    <button onclick="tentar(8)">8Ô∏è‚É£</button>
    <button onclick="tentar(9)">9Ô∏è‚É£</button>
    <button onclick="tentar(10)">üîü</button>
  </div>

  <br>
  <button id="botaoRelatorio" style="display:none" onclick="gerarPDF()">
    üìÑ Criar relat√≥rio (PDF)
  </button>

</div>

</div>

<script>
let numeroSecreto;
let tentativas = 0;
let tempoRestante = 30;
let timer;
let jogoFinalizado = false;

// BLOQUEIO: s√≥ pode jogar uma vez
if (localStorage.getItem("atividadeConcluida") === "sim") {
  document.body.innerHTML = `
    <div style="text-align:center;margin-top:50px;">
      <h2>‚ö†Ô∏è Atividade j√° realizada</h2>
      <p>Voc√™ s√≥ pode jogar uma vez.</p>
    </div>
  `;
}

function iniciarJogo() {
  const nome = document.getElementById("nomeAluno").value.trim();
  const email = document.getElementById("emailAluno").value.trim();

  if (!nome) {
    alert("Digite seu nome.");
    return;
  }

  if (!email.endsWith("@handtalk.me")) {
    alert("Use seu e-mail @handtalk.me");
    return;
  }

  document.getElementById("formInicio").style.display = "none";
  document.getElementById("jogo").style.display = "block";

  numeroSecreto = Math.floor(Math.random() * 10) + 1;
  tentativas = 0;
  tempoRestante = 30;
  jogoFinalizado = false;

  document.getElementById("tentativas").textContent = tentativas;
  document.getElementById("tempo").textContent = tempoRestante;
  document.getElementById("feedback").textContent = "Escolha um n√∫mero üëá";
  document.getElementById("avatar").src = "avatar_maior.gif";

  timer = setInterval(() => {
    tempoRestante--;
    document.getElementById("tempo").textContent = tempoRestante;

    if (tempoRestante <= 0) {
      clearInterval(timer);
      finalizarJogo("‚è∞ Tempo acabou!");
    }
  }, 1000);
}

function tentar(numero) {
  if (jogoFinalizado) return;

  tentativas++;

  if (numero > numeroSecreto) {
    document.getElementById("feedback").innerHTML = "‚¨áÔ∏è Tente menor";
    document.getElementById("avatar").src = "avatar_menor.gif";
  } 
  else if (numero < numeroSecreto) {
    document.getElementById("feedback").innerHTML = "‚¨ÜÔ∏è Tente maior";
    document.getElementById("avatar").src = "avatar_maior.gif";
  } 
  else {
    clearInterval(timer);
    document.getElementById("avatar").src = "avatar_acertou.gif";
    finalizarJogo("üéâ Voc√™ acertou!");
  }

  document.getElementById("tentativas").textContent = tentativas;
}

function finalizarJogo(mensagem) {
  jogoFinalizado = true;
  localStorage.setItem("atividadeConcluida", "sim");

  document.getElementById("feedback").innerHTML = mensagem;
  document.getElementById("botaoRelatorio").style.display = "block";
}

function gerarPDF() {
  const nome = document.getElementById("nomeAluno").value;
  const email = document.getElementById("emailAluno").value;

  const conteudo = `
Relat√≥rio de Atividade - Adivinhe o N√∫mero

Nome: ${nome}
E-mail: ${email}

N√∫mero secreto: ${numeroSecreto}
Tentativas: ${tentativas}
Tempo restante: ${tempoRestante}s
Resultado: ${tempoRestante > 0 ? "Conclu√≠do" : "Tempo esgotado"}
  `;

  const blob = new Blob([conteudo], { type: "application/pdf" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "relatorio_libras_numero.pdf";
  link.click();
}
</script>

</body>
</html>
